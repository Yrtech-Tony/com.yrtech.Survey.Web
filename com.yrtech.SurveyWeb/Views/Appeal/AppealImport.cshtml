@{
    ViewBag.Title = "巡检系统-申诉数据导入";
}
<div class="page-title">
    <div class="title_left">
        <h3>申诉管理 <small></small></h3>
    </div>
</div>
<form id="upload-form" style="display:none">
    <input type='file' id='uploadFile' onchange="uploadAppeal()">
    <input type="hidden" value="0" id="UpProjectId" />
</form>
<div class="operation col-md-offset-9 form-horizontal">
    <div class="form-group">
        <label class="control-label col-md-4">品牌</label>
        <div class="col-md-8">
            <select id="brand-sel" class="form-control">
                <option value="1">奔驰</option>
            </select>
        </div>
    </div>
</div>
<table id="appeal-table" class="table table-striped table-bordered dt-responsive">
    <thead>
        <tr>
            <th>期号ID</th>
            <th>期号代码</th>
            <th>期号名称</th>
            <th>年份</th>
            <th>季度</th>
            <th>申诉数据来源</th>
            <th>上传</th>
            <th>开始申诉</th>
            <th>开始申诉时间</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

@section scripts{
    <script src="~/Scripts/api.js"></script>
    <script src="~/Scripts/page.js"></script>
    <script>
        $(function () {
            loadProjectForAppeal($("#brand-sel").val(),'');
        })
        function jqSubmit() {
            var file_obj = document.getElementById('fafafa').files[0];

            var fd = new FormData();
            fd.append('username', 'root')
            fd.append('fafafa', file_obj);

            $.ajax({
                url:'/upload_file/',
                type:'POST',
                data:fd,
                processData:false,  //tell jQuery not to process the data
                contentType: false,  //tell jQuery not to set contentType
                //这儿的三个参数其实就是XMLHttpRequest里面带的信息。
                success:function (arg,a1,a2) {
                    console.log(arg);
                    console.log(a1);
                    console.log(a2);
                }

            })
        }
        function uploadAppeal() {
            var file_obj = document.getElementById('uploadFile').files[0];

            var fd = new FormData();
            fd.append('UpProjectId', $("#UpProjectId").val())
            fd.append('uploadFile', file_obj);

            $.ajax({
                url: 'Appeal/uploadAppealFile',
                type: 'POST',
                data: fd,
                processData: false,  //tell jQuery not to process the data
                contentType: false,  //tell jQuery not to set contentType
                //这儿的三个参数其实就是XMLHttpRequest里面带的信息。
                success: function (arg, a1, a2) {
                    console.log(arg);
                    console.log(a1);
                    console.log(a2);
                }
            })
        }
    </script>
}


